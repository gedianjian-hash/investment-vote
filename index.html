<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Vote for Listing - Global Investment Trading Competition</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #f5f5f5;
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
        }
        .container {
            max-width: 100%;
            width: 100%;
            padding: 12px;
            margin: 0 auto;
        }
        header {
            background: white;
            padding: 20px 12px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            text-align: center;
        }
        h1 { font-size: 1.6em; margin-bottom: 12px; }
        .intro { font-size: 0.9em; color: #555; margin-bottom: 10px; text-align: left; }
        .voting-section {
            background: white;
            padding: 20px 8px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }
        h2 { font-size: 1.4em; text-align: center; margin-bottom: 20px; }

        /* Top 3 布局修复：确保 2 - 1 - 3 视觉顺序 */
        .top-three-container {
            display: flex;
            justify-content: center;
            align-items: flex-end;
            gap: 8px;
            margin-bottom: 24px;
            padding: 0 4px;
        }
        .top-card {
            flex: 1;
            background: white;
            border-radius: 12px;
            padding: 12px 4px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            text-align: center;
            border: 1px solid #e0e0e0;
            position: relative;
        }
        
        /* 核心修复：通过 Order 控制视觉位置 */
        /* 数组索引 0 (第一名) -> order 2 (中间) */
        .rank-pos-0 { order: 2; transform: scale(1.08); z-index: 2; border-color: #ffd700; padding: 20px 4px; }
        /* 数组索引 1 (第二名) -> order 1 (左边) */
        .rank-pos-1 { order: 1; transform: scale(1); z-index: 1; }
        /* 数组索引 2 (第三名) -> order 3 (右边) */
        .rank-pos-2 { order: 3; transform: scale(0.95); z-index: 1; }

        .top-card-image-container {
            position: relative;
            display: inline-block;
            margin-bottom: 8px;
        }
        .top-card-image {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid #ddd;
        }
        .rank-pos-0 .top-card-image { border-color: #ffd700; width: 85px; height: 85px; }

        .rank-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #007bff;
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.75em;
        }
        .rank-pos-0 .rank-badge { background: #ffd700; color: #333; width: 32px; height: 32px; }

        .top-card-name { font-size: 0.9em; font-weight: bold; margin-bottom: 4px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .top-card-votes { font-size: 1.1em; font-weight: bold; color: #dc3545; margin-bottom: 8px; }
        .top-vote-btn {
            width: 90%;
            padding: 8px 0;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: bold;
        }

        .remaining-list { display: flex; flex-direction: column; gap: 10px; }
        .analyst-row {
            background: #fafafa;
            border-radius: 10px;
            padding: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
            border: 1px solid #eee;
        }
        .rank-number {
            color: #888;
            min-width: 35px;
            font-weight: bold;
            font-size: 0.9em;
        }
        .analyst-image {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            object-fit: cover;
        }
        .analyst-info { flex: 1; }
        .analyst-name { font-size: 1em; font-weight: bold; }
        .vote-count { font-size: 1em; font-weight: bold; color: #dc3545; }
        .vote-btn {
            padding: 6px 12px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 0.85em;
        }

        .sponsors-section { background: white; padding: 20px 10px; border-radius: 12px; }
        .sponsors-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }
        .sponsor-item { text-align: center; }
        .sponsor-logo { width: 60px; height: 60px; object-fit: contain; margin-bottom: 5px; }
        .sponsor-name { font-size: 0.75em; display: block; color: #666; }

        /* Modal & Success Page */
        .profile-modal, .voted-page {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.8);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }
        .profile-modal.show, .voted-page.show { display: flex; }
        .profile-content, .voted-content {
            background: white;
            border-radius: 16px;
            padding: 20px;
            width: 85%;
            max-width: 400px;
            position: relative;
        }
        .close-btn { position: absolute; top: 10px; right: 15px; font-size: 24px; border: none; background: none; color: #ccc; }
        .profile-image-large { width: 100px; height: 100px; border-radius: 50%; display: block; margin: 0 auto 15px; border: 3px solid #007bff; }
        .voted-checkmark { font-size: 50px; color: #28a745; text-align: center; margin-bottom: 10px; }
        .back-btn { width: 100%; padding: 12px; background: #007bff; color: white; border: none; border-radius: 8px; margin-top: 15px; }
    </style>
</head>
<body>
    <div class="container" id="mainPage">
        <header>
            <h1>Vote for Listing</h1>
            <p class="intro">Support your favorite analysts! The top 3 will manage a US$200 million fund.</p>
        </header>

        <div class="voting-section">
            <h2>Current Ranking</h2>
            <div class="top-three-container" id="topThree"></div>
            <div class="remaining-list" id="analyststList"></div>
        </div>

        <div class="sponsors-section">
            <h3 style="text-align:center; margin-bottom:15px;">Official Sponsors</h3>
            <div class="sponsors-grid">
                <div class="sponsor-item"><img src="https://i.ibb.co/PGdSgJ3q/Bybit.png" class="sponsor-logo"><span class="sponsor-name">Bybit</span></div>
                <div class="sponsor-item"><img src="https://i.ibb.co/tPYqM84g/coinbase.png" class="sponsor-logo"><span class="sponsor-name">Coinbase</span></div>
                <div class="sponsor-item"><img src="https://i.ibb.co/29jBtZj/kraken.jpg" class="sponsor-logo"><span class="sponsor-name">Kraken</span></div>
                <div class="sponsor-item"><img src="https://i.ibb.co/6cxJc2Y8/okx.png" class="sponsor-logo"><span class="sponsor-name">OKX</span></div>
                <div class="sponsor-item"><img src="https://i.ibb.co/MyhpDtZ0/cash-app.png" class="sponsor-logo"><span class="sponsor-name">Cash App</span></div>
                <div class="sponsor-item"><img src="https://i.ibb.co/7x2GBvHZ/crypto.png" class="sponsor-logo"><span class="sponsor-name">Crypto.com</span></div>
            </div>
        </div>
    </div>

    <div class="profile-modal" id="profileModal">
        <div class="profile-content">
            <button class="close-btn" onclick="closeProfile()">×</button>
            <img id="profileImageLarge" src="" class="profile-image-large">
            <h3 id="profileName" style="text-align:center"></h3>
            <p id="profileTitle" style="text-align:center; color:#007bff; font-size:0.9em; margin-bottom:15px;"></p>
            <div id="profileBioContent" style="font-size:0.85em; color:#666; max-height:200px; overflow-y:auto;"></div>
        </div>
    </div>

    <div class="voted-page" id="votedPage">
        <div class="voted-content" style="text-align:center">
            <div class="voted-checkmark">✓</div>
            <h3>Vote Successful!</h3>
            <p id="votedAnalystName" style="font-weight:bold; margin:10px 0;"></p>
            <div style="background:#f0f7ff; padding:15px; border-radius:10px;">
                <p style="font-size:0.8em; color:#666">Total Votes</p>
                <p id="votedCountNumber" style="font-size:1.8em; font-weight:bold; color:#007bff"></p>
            </div>
            <button class="back-btn" onclick="goBack()">Continue Voting</button>
        </div>
    </div>

    <script>
        const analysts = [
            { name: "Dan Lagan", votes: 1896007, image: "https://i.ibb.co/Xxssmfkt/image.jpg", title: "CEO & CIO", bio: "Mr. Lagan joined Congress Asset Management in 1989..." },
            { name: "Marcus Vance", votes: 1752347, image: "https://i.ibb.co/JR39RJmT/photo-2026-01-02-22-10-19.jpg", title: "Economist & Investor", bio: "Marcus Vance is a renowned economist and investor..." },
            { name: "David Kostin", votes: 1141431, image: "https://i.ibb.co/3yScCd6n/20250717023201.png", title: "Chief U.S. Equity Strategist", bio: "David Kostin is a partner at Goldman Sachs..." },
            { name: "Joseph Gabelli", votes: 1122402, image: "https://i.ibb.co/1J9Pv6T4/20250717023419.png", title: "Portfolio Manager", bio: "Joseph Gabelli has served as a portfolio manager since 2018..." },
            { name: "Peter Mintzberg", votes: 1084986, image: "https://i.ibb.co/dssTwDqN/20250717023615.png", title: "CEO, Grayscale", bio: "Peter Mintzberg is the CEO of Grayscale Investments..." },
            { name: "John Hoffman", votes: 1047668, image: "https://i.ibb.co/M55y5kMW/20250717030534.png", title: "Head of Distribution, Grayscale", bio: "John Hoffman is a financial executive and ETF pioneer..." },
            { name: "Glenn Hutchins", votes: 984267, image: "https://i.ibb.co/20KVXZYw/20250717024940.png", title: "Chairman, North Island", bio: "Glenn Hutchins co-founded Silver Lake Partners..." },
            { name: "Corey Bowen", votes: 948071, image: "https://i.ibb.co/WW9bN636/20250717025316.png", title: "Chief Financial Advisor", bio: "Corey Bowen provides strategic consulting insights..." },
            { name: "Gokul Laroia", votes: 936611, image: "https://i.ibb.co/JwMX29Yy/20250717025943.png", title: "CEO Asia, Morgan Stanley", bio: "Gokul Laroia is a member of the firm's Management Committee..." },
            { name: "Mike Wilson", votes: 918200, image: "https://i.ibb.co/KphbfCbD/20250717025647.png", title: "Chief Equity Strategist", bio: "Mike Wilson leverages best-in-class research..." }
        ];

        let votesData = {};
        analysts.forEach(a => votesData[a.name] = a.votes);

        function formatNumber(num) { return num.toLocaleString(); }

        function renderAll() {
            // 重新按票数排序
            const sorted = [...analysts].sort((a, b) => votesData[b.name] - votesData[a.name]);
            
            // 渲染前三名
            const topThreeContainer = document.getElementById('topThree');
            topThreeContainer.innerHTML = sorted.slice(0, 3).map((a, i) => `
                <div class="top-card rank-pos-${i}">
                    <div class="top-card-image-container" onclick="showProfile('${a.name}')">
                        <img src="${a.image}" class="top-card-image">
                        <div class="rank-badge">No.${i+1}</div>
                    </div>
                    <div class="top-card-name">${a.name}</div>
                    <div class="top-card-votes">${formatNumber(votesData[a.name])}</div>
                    <button class="top-vote-btn" onclick="vote('${a.name}')">Vote</button>
                </div>
            `).join('');

            // 渲染其他名次
            const listContainer = document.getElementById('analyststList');
            listContainer.innerHTML = sorted.slice(3).map((a, i) => `
                <div class="analyst-row">
                    <div class="rank-number">No.${i+4}</div>
                    <img src="${a.image}" class="analyst-image" onclick="showProfile('${a.name}')">
                    <div class="analyst-info">
                        <div class="analyst-name">${a.name}</div>
                        <div class="vote-count">${formatNumber(votesData[a.name])}</div>
                    </div>
                    <button class="vote-btn" onclick="vote('${a.name}')">Vote</button>
                </div>
            `).join('');
        }

        function vote(name) {
            votesData[name]++;
            document.getElementById('votedAnalystName').textContent = name;
            document.getElementById('votedCountNumber').textContent = formatNumber(votesData[name]);
            document.getElementById('mainPage').style.display = 'none';
            document.getElementById('votedPage').classList.add('show');
            renderAll();
        }

        function goBack() {
            document.getElementById('votedPage').classList.remove('show');
            document.getElementById('mainPage').style.display = 'block';
        }

        function showProfile(name) {
            const a = analysts.find(item => item.name === name);
            document.getElementById('profileImageLarge').src = a.image;
            document.getElementById('profileName').textContent = a.name;
            document.getElementById('profileTitle').textContent = a.title;
            document.getElementById('profileBioContent').textContent = a.bio;
            document.getElementById('profileModal').classList.add('show');
        }

        function closeProfile() { document.getElementById('profileModal').classList.remove('show'); }

        // 初始化
        renderAll();
    </script>
</body>
</html>
